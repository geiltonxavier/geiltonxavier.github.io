<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geilton Xavier - Senior Software Engineer</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/photos.css">
    <link rel="stylesheet" href="css/photos-modal.css">
    <!-- Font Awesome for social icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-papm6Q+ua5Q6Qw1Qn5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a class="logo" href="#home">Geilton Xavier</a>
            <ul class="nav-links">
                <li><a href="#home" class="nav-link active">Home</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#now" class="nav-link">Now</a></li>
                <li><a href="#photos" class="nav-link">Photos</a></li>
                <li><a href="#blog" class="nav-link">Blog</a></li>
            </ul>
        </div>
    </nav>

    <!-- Light/Dark Toggle Button (fora da home) -->
    <button class="bg-toggle" id="bgThemeToggle" title="Alternar tema claro/escuro" aria-label="Alternar tema claro/escuro"><span class="slider"></span></button>

    <!-- Hero Section -->
    <section class="hero bg-image" id="home">
        <div class="hero-content">
            <h1>Geilton Xavier</h1>
            <p>Senior Software Engineer â€¢ Cloud Native Developer â€¢ Tech Leader</p>
            <a href="#about" class="cta-button">Discover More</a>
        </div>
    </section>

    <!-- About Section -->
    <section class="section" id="about">
        <div class="container">
            <h2>About Me</h2>
            <div class="about-grid" id="aboutGrid"></div>
            <div class="skills-grid" id="skillsGrid"></div>
        </div>
    </section>

    <!-- Now Section -->
    <section class="section" id="now">
        <div class="container">
            <h2>What I'm Doing Now</h2>
            <div class="now-content" id="nowContent"></div>
        </div>
    </section>

    <!-- Photos Section -->
    <section class="section" id="photos">
        <div class="container">
            <h2>Photography</h2>
            <div class="photos-grid" id="photosGrid"></div>
        </div>
        <!-- Modal for expanded photo -->
        <div id="photoModal" class="photo-modal" style="display:none;">
            <span class="photo-modal-close" id="photoModalClose">&times;</span>
            <img class="photo-modal-img" id="photoModalImg" src="" alt="">
            <div class="photo-modal-caption" id="photoModalCaption"></div>
        </div>
    </section>

    <!-- Blog Section -->
    <section class="section" id="blog">
        <div class="container">
            <h2>Blog & Thoughts</h2>
            <div class="blog-content" id="blogContent"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-mountains">
            <svg viewBox="0 0 1200 120" width="100%" height="80" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" style="display:block">
                <path d="M0,80 C200,100 400,40 600,60 C800,80 1000,20 1200,40 L1200,0 L0,0 Z" fill="#4a7c59" opacity="0.18"/>
                <path d="M0,100 C300,80 600,120 900,80 C1050,60 1200,100 1200,100 L1200,0 L0,0 Z" fill="#2c5f2d" opacity="0.22"/>
                <path d="M0,60 C150,90 300,30 450,50 C600,70 750,10 900,30 C1050,50 1200,10 1200,10 L1200,0 L0,0 Z" fill="#97bc62" opacity="0.13"/>
            </svg>
        </div>
        <div class="container" id="footerContainer">
            <!-- Footer content will be rendered by JS -->
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/footer.js"></script>
    <script>
    // Render photos from photos.json
    fetch('photos.json')
      .then(response => response.json())
      .then(photos => {
        const grid = document.getElementById('photosGrid');
        grid.innerHTML = '';
        photos.forEach(photo => {
          const card = document.createElement('div');
          card.className = 'photo-card';
          card.innerHTML = `
            <div class="photo-img-wrapper">
              <img src="${photo.url}" alt="${photo.title}" class="photo-img" data-title="${photo.title.replace(/"/g, '&quot;')}" data-description="${photo.description.replace(/"/g, '&quot;')}" onerror="this.style.display='none';this.parentNode.innerHTML='ðŸ“·';" style="cursor:zoom-in;">
            </div>
            <div class="photo-info">
              <h3>${photo.title}</h3>
              <p>${photo.description}</p>
            </div>
          `;
          // Add click event to expand image
          card.querySelector('.photo-img').addEventListener('click', function() {
            const modal = document.getElementById('photoModal');
            const modalImg = document.getElementById('photoModalImg');
            const modalCaption = document.getElementById('photoModalCaption');
            modal.style.display = 'flex';
            modalImg.src = this.src;
            modalImg.alt = this.alt;
            // Fix: getAttribute('data-title') may be null if not set, fallback to alt
            const title = this.getAttribute('data-title') || this.alt || '';
            const desc = this.getAttribute('data-description') || '';
            modalCaption.textContent = title + (desc ? ' â€” ' + desc : '');
          });
          grid.appendChild(card);
        });
      });
    // Modal close logic
    document.addEventListener('DOMContentLoaded', function() {
      const modal = document.getElementById('photoModal');
      const closeBtn = document.getElementById('photoModalClose');
      closeBtn.onclick = function() { modal.style.display = 'none'; };
      modal.onclick = function(e) { if(e.target === modal) modal.style.display = 'none'; };
      document.addEventListener('keydown', function(e) { if(e.key === 'Escape') modal.style.display = 'none'; });

      // Render About, Skills, Now, Blog from content.json
      fetch('content.json')
        .then(response => response.json())
        .then(content => {
          // About/Profile
          const aboutGrid = document.getElementById('aboutGrid');
          if (aboutGrid && content.profile && content.about) {
            aboutGrid.innerHTML = `
              <div class="profile-card">
                <div class="profile-image"><img src="${content.profile.avatar}" alt="${content.profile.name}" style="width:100%;height:100%;object-fit:cover;border-radius:50%;"></div>
                <h3>${content.profile.title}</h3>
                <p>Based in ${content.profile.location}</p>
                <p>Originally from ${content.profile.origin}</p>
              </div>
              <div class="about-content">
                <h3>${content.about.headline}</h3>
                ${content.about.description.map(p => `<p>${p}</p>`).join('')}
              </div>
            `;
          }
          // Skills
          const skillsGrid = document.getElementById('skillsGrid');
          if (skillsGrid && Array.isArray(content.skills)) {
            skillsGrid.innerHTML = content.skills.map(skill => `
              <div class="skill-card">
                <h3>${skill.title}</h3>
                <p>${skill.items}</p>
              </div>
            `).join('');
          }
          // Now
          const nowContent = document.getElementById('nowContent');
          if (nowContent && Array.isArray(content.now)) {
            nowContent.innerHTML = content.now.map(item => `
              <div class="current-item">
                <div class="icon">${item.icon}</div>
                <div>
                  <h3>${item.title}</h3>
                  <p>${item.description}</p>
                </div>
              </div>
            `).join('');
          }
          // Blog
          const blogContent = document.getElementById('blogContent');
          if (blogContent && content.blog) {
            blogContent.innerHTML = `
              <h3>${content.blog.headline}</h3>
              ${content.blog.description.map(p => `<p>${p}</p>`).join('')}
              <a href="${content.blog.link}" target="_blank" class="blog-link">Visit My Blog â†’</a>
              <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-light);">
                <em>${content.blog.note}</em>
              </p>
            `;
          }
        });
    });
    </script>
</body>
</html>